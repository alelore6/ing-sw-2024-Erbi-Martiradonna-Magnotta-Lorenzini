
- test su tutto.

- per individuare disconnessioni: thread con server che pinga client ogni tot OK

- parametro riconnessione client: nickname, token (password)

- per persistenza in caso di crash del server: sarebbe da salvare ogni tot tutto lo stato del gioco in un file ? file Json o altro?
    -dump dello stato di gioco
        -oppure serializzare in Json (oppure binario, xml..) il model e fare un costruttore che ricarica le classi di Json
            -check transient attributes (non devono essere serializzate perchÃ© cambiano, in caso di crash)


- In serverstub e clientskeleton quando fai update devi passare anche il Client?? Ã¨ necessario sapere a chi devo passare gli update!!
-Canali di comunicazione tra client e server: 4 canali diversi per ogni client che convergono in uno unico per il server?  Ã¨ diramato oppure una cosa unica?

                                                           SERVER
                                                            | |
                                                            | |
                                                            / \
                                                           /   \
                                                          /     \
                                                         /       \
                                                        /         \
                                                       /   /| |\   \
                                                      /   / | | \   \
                                                     CL_1  CL_2   CL_3






- logica per riconnessione



DEBUG 10/05:
    11/05 00:42 Siamo morti, distrutti...non ce la facciamo piÃ¹. I problemi sono:
        Server non riesce a mandare gli eventi ma il client sÃ¬ (boh) (in socket)
        mvListener sembra essere null con l'instanziazione due righe sopra (booh)
        Continuare a debuggare da Controller.addPlayerToLobby

paint() e repaint()
passare un argomento a paint

esame

socket accettazione connessione

DEBUG E LAVORO (Alessandro e Gianluca):

    âœ… Modificare accept e receive (al posto del while true mettere un thread in modo che l'accept
                                                    possa essere chiamata anche per altri client)

    âœ… Fixare ack (Revisione)

    âœ… Per avviare il client ora possiamo mettere dei parametri: -tui, -rmi

    âœ… Togliere la TUI di starting

    ðŸ”œ Fixare numplayer che resta a zero   (Gianlu)



    - se si chiude la finestra di gui Ã¨ una disconnessione? si


-Classe immutabile del model (serializzabile) da passare alla view  --> probabile causa di crash quando si starta il game

-Sistemare eventi mandati a tutti (mustbesenttoAll)

-RMI




//aggiornamento 23/05/2024 21:18

    dovrei aver sistemato che fa la richiesta del colore del token uno alla volta
    su questo nella tui c'era un problema a prendere l'input: lo dovevi scrivere due volte

    si arriva alla scelta dell'obbiettivo correttamente ma il server a quanto pare non riceve la risposta
    non ci sono eccezioni e sembra venir inviata dal client perchÃ¨ fa la print appena prima della writeObject

    aggiunti costrutti a ackResponse: guardateli prima di utilizzarli




// aggiornamento 24/05
    ho messo le classi view negli eventi playcard e draw card e ora arrivano

    current Resources non in playerView:  non saprei come renderlo serializzabile perchÃ¨ essendo una mappa Ã¨  sempre modificabile

    apettare che tutti abbiano finito la fase di start game prima di chiamare next player:
    --> quando finisce il for di players aspettare tutte le placeStartingCard?
    --> serve un altro lock? mi sa di si perchÃ¨ anche l'ultimo che viene inizializzato potrebbe finire di rispondere
        prima degli altri quindi non si mantiene l'ordine

    problemi di sincronizzazzione nelle risposte di playcard e drawcard

--> c'Ã¨ da risolvere una cosa negli angoli delle carte nel json: se non vengono proprio inizializzati l'array corner non viene creato di 8 elementi
        --> o cambiamo il modo di descrivere gli angoli coperti o separiamo gli angoli davanti e dietro
        --> play card lancia eccezione per questo errore dentro currentResources.update riga 75 (array out of bounds)


//aggiornamento 31/05:

    -known bugs:
        -quando si gioca nella tui, se piazzi una carta tra 2 carte e una di quelle non ha l'angolo scoperto, la piazza lo stesso.
           --> controllare i controlli lato client in playCard()     UPDATE:  SOLVED âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…

        //TODO testando l'endgame nella tui (ho messo 1 come punto per triggerare endgame):
            -->viene stampato sempre "zero cards left" anche se non Ã¨ cosÃ¬ come messaggio di endgame (assieme a quello normale)
            --> alla fine dei turni rimanenti non ci si riallaccia alla fine del gioco (non vengono stampati i giocatori vincenti
                e non viene terminato il gioco propriamente)  (sembra che l'evento FinalRankings non venga mandato)

// Aggiornamento 01/06:
    disconnessione implementata in parte:
    âœ…   Il client si disconnette correttamente ora (anche nel model)
    âœ…   L'evento viene mandato a tutti
    ðŸ”œ   Riconnessione (da implementare)
    ðŸ”œ   Far finire la partita quando rimane un giocatore solo (magari dopo un timeout)


//Aggiornamento 4/06
  BUG: Il gioco non conta le risorse della starting card.  âœ… SOLVED âœ…


TODO: - se un utente inserisce un nick con dei punti, lato server cambiare con _
      - modificare  tablecenterview per attributi colore prima carta di entrambi i mazzi
            e modificare anche l'evento draw che ritorna il colore della carta dopo


//TODO FIXARE GETCOLOR RESOURCE DECK GOLD DECK



